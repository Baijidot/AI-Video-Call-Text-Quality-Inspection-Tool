# 白芨AI 视频通话文本质检小工具

一个基于 Gradio 的轻量化 AI 文本质检工具，专为视频通话文本质量检查设计。支持自定义违禁词库、实时高亮显示问题词汇，让文本质检更高效、更直观。

**作者主页：** https://space.bilibili.com/292001394

## ✨ 功能特点

- 🎨 **美观的 Web 界面** - 基于 Gradio 构建，简洁易用
- 📁 **灵活的文件上传** - 支持 TXT 格式文本记录上传
- 📊 **自定义词库** - 支持上传 CSV 格式的违禁词列表，也可使用默认词库
- 🎯 **智能检测** - 自动识别违规词和无效词
- 🌈 **高亮显示** - 问题词汇用不同颜色标注（违规词红色、无效词橙色）
- 📈 **详细报告** - 生成包含统计数据和详细问题列表的 HTML 报告
- 💾 **模板下载** - 提供 CSV 词库模板下载，方便快速上手
- 🔒 **纯本地运行** - 无需联网，数据安全有保障

## 📂 项目结构

```
├── app.py                      # Gradio Web 界面主程序
├── quality_check.py            # 质检核心逻辑（支持 TXT/CSV 词库）
├── report_generator.py         # HTML 报告生成器（带颜色高亮）
├── check_words.txt             # 默认违规/无效词库（TXT 格式）
├── Prohibited words.CSV        # CSV 词库模板
├── sample_text.txt             # 示例测试文本 1
├── 测试文本1.txt               # 示例测试文本 2（中文）
└── requirements.txt            # Python 依赖包
```

## 🚀 快速开始

### 1. 安装依赖

确保已安装 Python 3.7+，然后运行：

```bash
pip install -r requirements.txt
```

### 2. 启动应用

```bash
python app.py
```

应用会自动在浏览器中打开，默认地址：`http://127.0.0.1:7860`

### 3. 使用步骤

#### 基础使用（使用默认词库）
1. 📤 上传 TXT 格式的视频通话文本记录
2. 👀 确认上传状态显示文件名
3. 🔍 点击"开始质检"按钮
4. 📊 在右侧查看带颜色高亮的质检报告

#### 高级使用（自定义词库）
1. 📥 点击"下载 CSV 模板"获取词库模板
2. ✏️ 编辑 CSV 文件，添加自定义违规词和无效词
3. 📤 上传自定义的 CSV 词库文件
4. 📄 上传待检测的文本文件
5. 🔍 点击"开始质检"，系统将使用您的自定义词库

### 4. 词库配置说明

#### 默认 TXT 词库格式（check_words.txt）
```
违规词：敏感词1,敏感词2,禁止,违法；无效词：嗯,啊,呃,那个,这个,重复
```

#### CSV 词库格式（Prohibited words.CSV）
| No. | Restricted words | Invalid Words |
|-----|------------------|---------------|
| 1   | xx               | 嗯            |
| 2   | xx               | 啊            |
| 3   | xx               | 那个          |

**注意：** CSV 文件必须包含 "Restricted words"（违规词）和 "Invalid Words"（无效词）列。

## 🧪 测试

项目提供了两个测试文件：
- `sample_text.txt` - 简单测试样本
- `测试文本1.txt` - 完整的视频通话记录样本

可以直接上传这些文件进行功能测试。

## 🎯 功能亮点

### 1. 智能词库系统
- **双格式支持**：同时支持 TXT 和 CSV 两种词库格式
- **优先级机制**：上传 CSV 词库时自动优先使用，未上传则使用默认 TXT 词库
- **灵活扩展**：可随时添加新的违规词和无效词

### 2. 可视化报告
- **颜色编码**：
  - 🔴 违规词：红色高亮（#ff5252）
  - 🟠 无效词：橙色高亮（#ffa726）
  - ✅ 无问题：绿色边框标识
- **统计面板**：实时显示总句数、合格数、问题数、通过率
- **详细列表**：逐句展示检测结果，问题词直接在句子中高亮

### 3. 用户体验优化
- **实时状态反馈**：文件上传、词库加载状态实时显示
- **模板下载**：一键下载 CSV 词库模板，快速上手
- **响应式设计**：界面布局清晰，易于阅读和操作

## 📋 模块说明

### app.py - Web 界面
- 基于 Gradio Blocks 构建
- 左侧：文本上传区 + CSV 词库上传区
- 右侧：HTML 格式的质检结果展示
- 事件绑定：文件上传监听、质检按钮触发

### quality_check.py - 质检引擎
- `load_check_words()` - 加载 TXT 格式词库
- `load_check_words_from_csv()` - 加载 CSV 格式词库（新增）
- `check_sentence()` - 单句检测逻辑
- `start_quality_check()` - 主质检函数，支持词库优先级选择

### report_generator.py - 报告生成器
- `generate_simple_report()` - 生成纯文本报告
- `generate_html_report()` - 生成 HTML 高亮报告（新增）
- 自动统计数据、计算通过率
- CSS 样式内嵌，支持颜色高亮和图标显示

## ⚠️ 注意事项

- 确保上传的文本文件为 **UTF-8 编码**
- CSV 文件支持 `.csv` 和 `.CSV` 两种扩展名
- 默认词库文件 `check_words.txt` 必须存在
- 应用运行在本地，无需联网，数据不会上传到云端

## 🔧 技术栈

- **Python 3.7+**
- **Gradio 4.0+** - Web 界面框架
- **纯 Python 标准库** - 无额外依赖

## 📝 更新日志

### v2.0（当前版本）
- ✨ 新增 CSV 词库上传功能
- 🎨 新增 HTML 高亮报告（违规词/无效词颜色标注）
- 📥 新增 CSV 模板下载功能
- 🔧 修复文件扩展名大小写敏感问题
- 🌐 自定义浏览器标题为"白芨AI 视频通话文本质检小工具"

### v1.0
- 🎉 初始版本发布
- ✅ 基础质检功能
- ✅ TXT 词库支持
- ✅ 纯文本报告生成

## 📞 联系作者

- **Bilibili：** https://space.bilibili.com/292001394
- **项目反馈：** 欢迎在 Issues 中提出建议和问题

## 📄 许可证

本项目仅供学习和研究使用。

---

**⭐ 如果这个工具对你有帮助，欢迎 Star 支持！**

